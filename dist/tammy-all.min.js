/*!
 * tammy.js v1.0.0-beta.2
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
var e,t;e=this,t=function(){"use strict";function m(e){return null==e}function f(e){return!m(e)&&"object"==typeof e}function d(e){return"string"==typeof e}function s(e,t){return t?e.bind(t):e}function p(e,t,n){return f(e)&&function(e,t,n){var r=s(t,n);for(var o in e)if(e.hasOwnProperty(o)&&!1===r(e[o],o,e))break}(e,t,n)}function l(e,t){e[e.length]=t}function h(e,t,n,r,o){for(var a=s(r,o),u=t,i=void 0;!1!==i&&u<n;u++)i=a(e[u],u,e)}function T(e,t,n){return f(e)&&function(e,t,n){var r=s(t,n);for(var o in e)if(!1===r(e[o],o,e))break}(e,t,n)}function o(e,t,n){return e&&function(e,t,n){h(e,0,e.length,t,n)}(e,t,n)}function v(e,t){if(e)return l(e,t),t}var g=Object.assign||function(e){if(m(e))throw new TypeError("Cannot convert undefined or null to object");var n=Object(e);return o(arguments,function(e){T(e,function(e,t){n[t]=e})}),n};function a(r){for(var e=[],t=arguments.length-1;0<t--;)e[t]=arguments[t+1];function n(e,t){if(f(e)){var n=r[t];n=f(n)?n:{},r[t]=a(n,e)}else r[t]=e}return o(e,function(e){T(e,n)}),r}function w(e,t){var n=new Error(e);return g(n,t),n}function u(r,e){return e.forEach(function(e){var t=e.fulfilled,n=e.rejected;r=r.then(t,n)}),r}function E(e,t){return e+(-1<e.indexOf("?")?"?":"&")+t}var x=/([?&]_=)[^&]*/,y=Date.now();var b=console&&console.error||function(){};function t(n){return n.use=function(e,t){return v(n,{fulfilled:e,rejected:t}),n},n.eject=function(e){return function(e,t){e.splice(t,1)}(e),n},n}var C="Content-Type";function i(e){var t=e.url,n=e.cache,r=e.baseURL,o=e.headers,a=e.method,u=e.params,i=e.data,s=e.adapter;switch(r&&!function(e){return/^([a-z][a-z0-9+\-.]*:)?\/\//i.test(e)}(t)&&(t=function(e){var t=arguments,n=t.length;m(e)?1<n&&(e=""):e=e.replace(/\/+$/,"");var r="";return h(t,1,n,function(e){r+="/",r+=e||""}),r&&(e+=r.replace(/\/+/g,"/")),e}(r,t)),a){case"GET":u||(e.params=u=i,e.data=i=void 0);break;case"POST":var c=o[C]||"";f(i)&&(i=c.indexOf("application/json")?function(e){var n=[];return T(e,function(e,t){v(n,t+"="+e)}),n.join("&")}(i):JSON.stringify(i),e.data=i)}return u&&(f(u)&&(u=function(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");var r=[];return p(e,function(e,t){e||!m(e)&&!isNaN(e)||(e=""),l(r,encodeURIComponent(t)+n+encodeURIComponent(e))}),r.length?r.join(t):""}(u)),t=E(t,u)),!1===n&&-1<["HEAD","GET"].indexOf(a)&&(t=function(e){return y++,e.replace(x,"$1"+y)===e&&(e=E(e,"_="+y)),e}(t)),e.url=t,s(e).then(function(e){var t=e.options,n=e.data;if("json"===t.responseType&&d(n))try{e.data=JSON.parse(n)}catch(e){b("parse data error: ",e)}return e})}var n={timeout:0,responseType:"json",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300||304===e}};function H(e){return"function"==typeof e}var R="Content-Type",k="ECONNABORTED",c={};function j(e){var t;return e?f(e)&&(e=(t=e).message):e="Request aborted",w(e||"",t)}function q(e){var t=Date.now().toString(36)+Math.random().toString(36).slice(2);return c[t]=e,t}function N(e){delete c[e.abortedToken],delete e.abortedToken,delete e.abortedError}var O={json:"application/json; charset=UTF-8",form:"application/x-www-form-urlencoded; charset=UTF-8",multipart:"multipart/form-data; charset=UTF-8"},r={"Content-Type":O.form},A={common:{Accept:"application/json, text/plain, */*"}};["DELETE","GET","HEAD"].forEach(function(e){A[e]={}}),["POST","PUT","PATCH"].forEach(function(e){A[e]=g({},r)}),n.adapter=function(v){return new Promise(function(o,a){var e=v.method,t=v.url,n=v.data,r=v.async,u=v.timeout,i=v.responseType,s=v.onDownloadProgress,c=v.onUploadProgress,f=v.abortion,d=v.xhrHooks,p=new window.XMLHttpRequest;p.open(e,t,!1!==r),p.timeout=u||0,p.onreadystatechange=function(){if(p&&4===p.readyState){N(v);var e=p.status,t=p.responseURL,n=p.responseText;if(0!==e||t&&0===t.indexOf("file:")){var r={data:i&&"text"!==i?p.response||n:p,statusText:p.statusText,options:v,request:p,status:e};d.response.forEach(function(e){return e(p,r,v)}),v.validateStatus(e)?o(r):a(w("Request failed with status code "+e,r)),p=null}}},p.onabort=function(){p&&(a(g(v.abortedError,{code:k,options:v,request:p})),N(v),p=null)};var l=v.abortedToken=q(function(e){v.abortedError=e,p&&p.abort()});H(f)&&f(l),p.onerror=function(){N(v),a(w("Network Error",{code:"ENETWORK",options:v,request:p})),p=null},p.ontimeout=function(){N(v),a(w("timeout of "+u+"ms exceeded",{code:"ETIMEOUT",options:v,request:p})),p=null},d.request.forEach(function(e){return e(v)});var h=v.headers;if(H(p.setRequestHeader)&&T(h,function(e,t){m(n)&&t===R?delete h[t]:p.setRequestHeader(t,e)}),v.withCredentials&&(p.withCredentials=!0),i)try{p.responseType=i}catch(e){b("responseType error: ",e)}H(s)&&p.addEventListener("progress",s),H(c)&&p.upload&&p.upload.addEventListener("progress",c),p.send(n||null)})};var S=function(e){this.interceptors={request:t([]),response:t([])},this.xhrHooks={request:[],response:[]},this.defaults=a({},n,e)};S.prototype.request=function(e){var t,n=(e=g({},this.defaults,e)).method,r=e.headers,o=e.contentType;n=e.method=n?n.toUpperCase():"GET",r=e.headers=function(e,t){return g({},A.common,A[t],e)}(r,n),(t=function(e){return e&&O[e]}(o))&&(r[R]=t);var a=this.xhrHooks;return e.xhrHooks=a,function(e,t,n){var r=Promise.resolve(e);return r=u(u(r,t).then(i),n)}(e,a.request,a.response)},S.prototype.setHeader=function(e,t,n){return n=n?n.toUpperCase():"common","Content-Type"===e&&(t=O[t]||t),(A[n]||A.common)[e]=t,this};var e=function t(e){var n=new S(e),o=function(e,t){return f(e)?e=(t=e).url:(t=t||{}).url=e,n.request(t)};return g(o,{use:function(e){return e.installed||(e(n),e.installed=!0),o},create:function(e){return t(e)},all:function(e){return Promise.all(e.map(function(e){return o(e)}))},isAborted:function(e){return e&&e.code===k},abort:function(e,t){return function(e,t,n){var r=c[e];return H(r)&&(r(j(t)),delete c[e]),n}(e,t,o)},abortAll:function(e){return function(n,e){return T(c,function(e,t){e(j(n)),delete c[t]}),e}(e,o)}}),["get","delete","head","options","post","put","patch"].forEach(function(r){o[r]=function(e,t,n){return o(e,a({method:r,data:t},n))}}),o.del=o.delete,o}();function U(e){e.xhrHooks.request.push(function(e){var t=e.auth,n=e.headers;if(t){var r=t.username||"",o=t.password||"";n.Authorization="Basic "+window.btoa(r+":"+o)}})}function P(){return!!(m(navigator)||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&(!m(window)&&!m(document))}var D=P()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(e){var t=e;return r&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return n=a(window.location.href),function(e){var t=d(e)?a(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},L={set:function(){},get:function(){return null},remove:function(){}};function F(e){e.xhrHooks.request.push(function(e){var t=e.url,n=e.withCredentials,r=e.xsrfHeaderName,o=e.xsrfCookieName,a=e.headers;if(P()){var u=(n||D(t))&&o?L.get(o):void 0;u&&(a[r]=u)}})}L.set=function(e,t,n,r,o,a){var u=[];u.push(e+"="+encodeURIComponent(t)),function(e){return"number"==typeof e}(n)&&u.push("expires="+new Date(n).toGMTString()),d(r)&&u.push("path="+r),d(o)&&u.push("domain="+o),!0===a&&u.push("secure"),document.cookie=u.join("; ")},L.get=function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},L.remove=function(e){this.write(e,"",Date.now()-864e5)};var G=/^(.*?):[ \t]*([^\r\n]*)$/gm;function I(e){e.xhrHooks.response.push(function(e,t,n){n.getAllResponseHeaders&&e.getAllResponseHeaders&&(t.headers=function(e){for(var t,n={};t=G.exec(e);)n[t[1].toLowerCase()]=t[2];return n}(e.getAllResponseHeaders()))})}return e.use(U).use(F).use(I),e.plugins={oauth:U,xsrf:F,resHeaders:I},e},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).tammy=t();