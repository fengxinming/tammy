/*!
 * tammy.js v1.0.0-beta.1
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
var e,t;e=this,t=function(){"use strict";function v(e){return null==e}function f(e){return!v(e)&&"object"==typeof e}function s(e,t){return t?e.bind(t):e}function d(e,t,n){return f(e)&&function(e,t,n){var r=s(t,n);for(var o in e)if(e.hasOwnProperty(o)&&!1===r(e[o],o,e))break}(e,t,n)}function p(e,t){e[e.length]=t}function l(e,t,n,r,o){for(var u=s(r,o),i=t,a=void 0;!1!==a&&i<n;i++)a=u(e[i],i,e)}function m(e,t,n){return f(e)&&function(e,t,n){var r=s(t,n);for(var o in e)if(!1===r(e[o],o,e))break}(e,t,n)}function o(e,t,n){return e&&function(e,t,n){l(e,0,e.length,t,n)}(e,t,n)}function h(e,t){if(e)return p(e,t),t}var T=Object.assign||function(e){if(v(e))throw new TypeError("Cannot convert undefined or null to object");var n=Object(e);return o(arguments,function(e){m(e,function(e,t){n[t]=e})}),n};function u(r){for(var e=[],t=arguments.length-1;0<t--;)e[t]=arguments[t+1];function n(e,t){if(f(e)){var n=r[t];n=f(n)?n:{},r[t]=u(n,e)}else r[t]=e}return o(e,function(e){m(e,n)}),r}function y(e,t){var n=new Error(e);return T(n,t),n}function i(r,e){return e.forEach(function(e){var t=e.fulfilled,n=e.rejected;r=r.then(t,n)}),r}function E(e,t){return e+(-1<e.indexOf("?")?"?":"&")+t}var q=/([?&]_=)[^&]*/,b=Date.now();var x=console&&console.error||function(){};function t(n){return n.use=function(e,t){return h(n,{fulfilled:e,rejected:t}),n},n.eject=function(e){return function(e,t){e.splice(t,1)}(e),n},n}var g="Content-Type";function a(e){var t=e.url,n=e.cache,r=e.baseURL,o=e.headers,u=e.method,i=e.params,a=e.data,s=e.adapter;switch(r&&!function(e){return/^([a-z][a-z0-9+\-.]*:)?\/\//i.test(e)}(t)&&(t=function(e){var t=arguments,n=t.length;v(e)?1<n&&(e=""):e=e.replace(/\/+$/,"");var r="";return l(t,1,n,function(e){r+="/",r+=e||""}),r&&(e+=r.replace(/\/+/g,"/")),e}(r,t)),u){case"GET":i||(e.params=i=a,e.data=a=void 0);break;case"POST":var c=o[g]||"";f(a)&&(a=c.indexOf("application/json")?function(e){var n=[];return m(e,function(e,t){h(n,t+"="+e)}),n.join("&")}(a):JSON.stringify(a),e.data=a)}return i&&(f(i)&&(i=function(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");var r=[];return d(e,function(e,t){e||!v(e)&&!isNaN(e)||(e=""),p(r,encodeURIComponent(t)+n+encodeURIComponent(e))}),r.length?r.join(t):""}(i)),t=E(t,i)),!1===n&&-1<["HEAD","GET"].indexOf(u)&&(t=function(e){return b++,e.replace(q,"$1"+b)===e&&(e=E(e,"_="+b)),e}(t)),e.url=t,s(e).then(function(e){var t=e.options,n=e.data;if("json"===t.responseType&&function(e){return"string"==typeof e}(n))try{e.data=JSON.parse(n)}catch(e){x("parse data error: ",e)}return e})}var n={timeout:0,responseType:"json",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300||304===e}};function w(e){return"function"==typeof e}var O="Content-Type",j="ECONNABORTED";var c={json:"application/json; charset=UTF-8",form:"application/x-www-form-urlencoded; charset=UTF-8",multipart:"multipart/form-data; charset=UTF-8"},r={"Content-Type":c.form},C={common:{Accept:"application/json, text/plain, */*"}};["DELETE","GET","HEAD"].forEach(function(e){C[e]={}}),["POST","PUT","PATCH"].forEach(function(e){C[e]=T({},r)}),n.adapter=function(h){return new Promise(function(o,u){var e=h.method,t=h.url,n=h.data,r=h.async,i=h.timeout,a=h.responseType,s=h.onDownloadProgress,c=h.onUploadProgress,f=h.abortion,d=h.xhrHooks,p=new window.XMLHttpRequest;p.open(e,t,!1!==r),p.timeout=i||0,p.onreadystatechange=function(){if(p&&4===p.readyState){var e=p.status,t=p.responseURL,n=p.responseText;if(0!==e||t&&0===t.indexOf("file:")){var r={data:a&&"text"!==a?p.response||n:p,statusText:p.statusText,options:h,request:p,status:e};d.response.forEach(function(e){return e(p,r,h)}),h.validateStatus(e)?o(r):u(y("Request failed with status code "+e,r)),p=null}}},p.onabort=function(){p&&(u(y("Request aborted",T({code:j,options:h,request:p},p.abortedError))),p=null)},f&&f.add(function(e){p.abortedError=e,p.abort()}),p.onerror=function(){u(y("Network Error",{code:"ENETWORK",options:h,request:p})),p=null},p.ontimeout=function(){u(y("timeout of "+i+"ms exceeded",{code:"ETIMEOUT",options:h,request:p})),p=null},d.request.forEach(function(e){return e(h)});var l=h.headers;if(w(p.setRequestHeader)&&m(l,function(e,t){v(n)&&t===O?delete l[t]:p.setRequestHeader(t,e)}),h.withCredentials&&(p.withCredentials=!0),a)try{p.responseType=a}catch(e){x("responseType error: ",e)}w(s)&&p.addEventListener("progress",s),w(c)&&p.upload&&p.upload.addEventListener("progress",c),p.send(n||null)})};var R=function(e){this.interceptors={request:t([]),response:t([])},this.xhrHooks={request:[],response:[]},this.defaults=u({},n,e)};R.prototype.request=function(e){var t,n=(e=T({},this.defaults,e)).method,r=e.headers,o=e.contentType;n=e.method=n?n.toUpperCase():"GET",r=e.headers=function(e,t){return T({},C.common,C[t],e)}(r,n),(t=function(e){return e&&c[e]}(o))&&(r[O]=t);var u=this.xhrHooks;return e.xhrHooks=u,function(e,t,n){var r=Promise.resolve(e);return r=i(i(r,t).then(a),n)}(e,u.request,u.response)},R.prototype.setHeader=function(e,t,n){return n=n?n.toUpperCase():"common","Content-Type"===e&&(t=c[t]||t),(C[n]||C.common)[e]=t,this};var H=function(){this.queue=[]};return H.prototype.abort=function(e){var t;e?f(e)&&(e=(t=e).message||""):e="Request aborted";for(var n,r=this.queue;n=r.shift();)n(y(e,t))},H.prototype.add=function(e){return h(this.queue,e),this},H.prototype.clear=function(){return this.queue.length=0,this},H.prototype.pipe=function(e){var t;if(e&&(t=e.queue))for(var n;n=t.shift();)h(t,n);return this},function t(e){var n=new R(e),o=function(e,t){return f(e)?e=(t=e).url:(t=t||{}).url=e,n.request(t)};return T(o,{Abortion:H,use:function(e){return e.installed||(e(n),e.installed=!0),o},create:function(e){return t(e)},all:function(e){return Promise.all(e.map(function(e){return o(e)}))},map:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return o.all(e)},isAborted:function(e){return e&&e.code===j}}),["get","delete","head","options","post","put","patch"].forEach(function(r){o[r]=function(e,t,n){return o(e,u({method:r,data:t},n))}}),o.del=o.delete,o}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).tammy=t();