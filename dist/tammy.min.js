/*!
 * tammy.js v1.0.0
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
var t,e;t=this,e=function(){"use strict";function v(t){return null==t}function f(t){return!v(t)&&"object"==typeof t}function m(t){return"string"==typeof t}function y(t){return"function"==typeof t}function s(t,e){return e?t.bind(e):t}function r(r,t,e){!function(t,e,n,r){var o=s(n,r);for(var i in e)if(!1===t(o,e[i],i))break}(function(t,e,n){return r.hasOwnProperty(n)&&t(e,n,r)},r,t,e)}function E(t,e,n){return f(t)&&r(t,e,n)}function o(t,e){return t[t.length]=e,t}function d(t,e,n){void 0===e&&(e="&"),void 0===n&&(n="=");var r=[];return E(t,function(t,e){t||!v(t)&&!isNaN(t)||(t=""),o(r,encodeURIComponent(e)+n+encodeURIComponent(t))}),r.length?r.join(e):""}function l(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function u(t,e,n,r,o){for(var i=s(r,o),u=e,a=void 0;!1!==a&&u<n;u++)a=i(t[u],u,t)}function p(t){var e=arguments.length;v(t)?1<e&&(t=""):t=t.replace(/\/+$/,"");var n="";return u(arguments,1,e,function(t){t&&(n+="/",n+=t)}),n&&(t+=n.replace(/\/+/g,"/")),t}var T=Object.assign||function(t){if(v(t))throw new TypeError("Cannot convert undefined or null to object");var n=Object(t);return u(arguments,1,arguments.length,function(t){E(t,function(t,e){n[e]=t})}),n};function a(t,e){return t<0?function(t,e){return e<=t?t:e}(0,e+t):t}function i(t,e,n,r,o){t&&function(t,e,n,r,o){var i=t.length;n=y(n)?(o=r,r=n,i):a(n,i),u(t,e=a(e,i),n,r,o)}(t,e,n,r,o)}function c(t,e){return t?(o(t,e),e):t}var n=Array.isArray;function e(t,e){return t&&n(t)?function(t,e){return t.splice(e,1)[0]||null}(t,e):null}function h(r,t){return E(t,function(t,e){if(f(t)){var n=r[e];n=f(n)?n:{},r[e]=h(n,t)}else r[e]=t}),r}function b(e){return i(arguments,1,function(t){h(e,t)}),e}function g(t){var n=[];return E(t,function(t,e){c(n,e+"="+t)}),n.join("&")}function w(t,e){return t+(-1===t.indexOf("?")?"?":"&")+e}var j={isNil:v,isString:m,isObject:f,isFunction:y,forOwn:E,assign:T,forSlice:i,append:c,removeAt:e,stringify:d,isAbsolute:l,joinURLs:p,mergeDeep:h,assignDeep:b,formify:g,joinQS:w},q="Content-Type",O="ECONNRESET",x="ECONNABORTED",C="ENETWORK";function S(t,e){var n=new Error(t);return T(n,e),n}var A=/([?&]_=)[^&]*/,D=Date.now();var R=console&&console.error||function(){};function N(n){return n.use=function(t,e){return c(n,{fulfilled:t,rejected:e})},n.eject=function(t){return e(t),n},n}function P(t){return t&&t.code===x}function H(t){var e=t.url,n=t.baseUrl,r=t.headers,o=t.method,i=t.qs,u=t.data,a=t.cache,s=t.adapter;switch(n&&!l(e)&&(e=p(n,e)),o){case"HEAD":case"DELETE":case"GET":i||(t.qs=i=u,t.data=u=void 0);break;case"POST":var c=r[q]||"";f(u)&&(u=c.indexOf("application/json")?g(u):JSON.stringify(u),t.data=u)}return i&&(f(i)&&(i=d(i)),e=w(e,i)),!1===a&&-1<["HEAD","DELETE","GET"].indexOf(o)&&(e=function(t){return D++,t.replace(A,"$1"+D)===t&&(t=w(t,"_="+D)),t}(e)),t.url=e,s(t)}function U(t,e,n){return function(e){return i(arguments,1,function(t){t.forEach(function(t){e=f(t)?e.then(t.fulfilled,t.rejected):e.then(t)})}),e}(Promise.resolve(t),n.request,e.request,[H],e.response,n.response)}var L={timeout:0,responseType:"json",validateStatus:function(t){return 200<=t&&t<300||304===t}};var _={json:"application/json; charset=utf-8",form:"application/x-www-form-urlencoded; charset=utf-8","form-data":"multipart/form-data; charset=utf-8"},k={"Content-Type":_.form},G={common:{Accept:"application/json, text/plain, */*"}};["DELETE","GET","HEAD"].forEach(function(t){G[t]={}}),["POST","PUT","PATCH"].forEach(function(t){G[t]=T({},k)});var z={};function I(t){var e={};return f(t)&&(e=t,t=""),function(t,e){return e.code=x,S(t||"Request aborted",e)}(t,e)}function J(){this.id=Date.now().toString(36)+Math.random().toString(36).slice(2),this.state=0}J.prototype.abort=function(t){var e=this.state;if(this.state=1,this.error=t,!e){var n=this._abort;n&&(n(),delete this._abort)}this.remove()},J.prototype.push=function(t){return this.state?t():this._abort=t,this},J.prototype.remove=function(){delete z[this.id]},L.adapter=function(h){return new Promise(function(o,i){function u(){d.remove(),l=null}var t=h.method,e=h.url,n=h.data,r=h.async,a=h.timeout,s=h.responseType,c=h.onDownloadProgress,f=h.onUploadProgress,d=h._abortion,l=new window.XMLHttpRequest;l.open(t,e,!1!==r),l.timeout=a||0,l.onreadystatechange=function(){if(l&&4===l.readyState){var t=l.status,e=l.responseURL;if(0!==t||e&&0===e.indexOf("file:")){var n=s&&"text"!==s?l.response||l.responseText:l,r={data:n,statusText:l.statusText,options:h,request:l,status:t};if(h.validateStatus(t)){if("json"===s&&m(n))try{r.data=JSON.parse(n)}catch(t){R("Parse data error: ",t)}o(r)}else i(function(t,e){return S("Request failed with status code "+(e.code=t),e)}(t,r));u()}}},l.onerror=function(){i(function(t,e){return e.code=C,S(t||"Network Error",e)}(null,{options:h,request:l})),u()},l.ontimeout=function(){i(function(t,e){return e.code=O,S("Timeout of "+t+"ms exceeded",e)}(a,{options:h,request:l})),u()};var p=h.headers;if(y(l.setRequestHeader)&&E(p,function(t,e){v(n)&&e===q?delete p[e]:l.setRequestHeader(e,t)}),h.withCredentials&&(l.withCredentials=!0),s)try{l.responseType=s||""}catch(t){R("responseType error: ",t)}y(c)&&l.addEventListener("progress",c),y(f)&&l.upload&&l.upload.addEventListener("progress",f),l.send(n||null),d.push(function(){i(T(d.error,{options:h,request:l})),l&&l.abort(),u()})})};var M=function(t){this.interceptors={request:N([]),response:N([])},this.internalHooks={request:N([]),response:N([])},this.defaults=b({},L,t)};M.prototype.request=function(t){var e,n=(t=T({},this.defaults,t)).method,r=t.headers,o=t.contentType,i=t.abortion;n=t.method=n?n.toUpperCase():"GET",r=t.headers=function(t,e){return T({},G.common,G[e],t)}(r,n),(e=function(t){return t&&_[t]}(o))&&(r[q]=e);var u=t._abortion=function(t){if(t)return z[t];var e=new J;return z[e.id]=e}();return y(i)&&i(u.id),U(t,this.internalHooks,this.interceptors)},M.prototype.setHeader=function(t,e,n){return n=n?n.toUpperCase():"common","Content-Type"===t&&(e=_[e]||e),(G[n]||G.common)[t]=e,this};var $=h,B=f,F=T;return function e(t){function o(t,e){return B(t)?t=(e=t).url:(e=e||{}).url=t,n.request(e)}var n=new M(t);return F(o,{use:function(t){return t.installed||(t(n,o),t.installed=!0),o},create:function(t){return e(t)},all:function(t){return Promise.all(t.map(function(t){return o(t)}))},isAborted:P,abort:function(t,e){return function(t,e){if(t){var n=z[t];n&&(n.abort(I(e)),delete z[t])}}(t,e),o},abortAll:function(t){return function(t){var n=I(t);E(z,function(t,e){t.abort(n),delete z[e]})}(t),o},util:j}),["get","delete","head","options","post","put","patch"].forEach(function(r){o[r]=function(t,e,n){return o(t,$({method:r,data:e},n))}}),o.del=o.delete,o}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).tammy=e();