/*!
 * tammy.js v1.0.0-beta.7
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
var e,t;e=this,t=function(){"use strict";function w(e){return null==e}function f(e){return!w(e)&&"object"==typeof e}function s(e,t){return t?e.bind(t):e}function d(e,t,n,r,o){for(var u=s(r,o),i=t,a=void 0;!1!==a&&i<n;i++)a=u(e[i],i,e)}function E(e,t,n){return f(e)&&function(e,t,n){var r=s(t,n);for(var o in e)if(e.hasOwnProperty(o)&&!1===r(e[o],o,e))break}(e,t,n)}var g=Object.assign||function(e){if(w(e))throw new TypeError("Cannot convert undefined or null to object");var n=Object(e);return d(arguments,1,arguments.length,function(e){E(e,function(e,t){n[t]=e})}),n};function p(e,t){return e[e.length]=t,e}function n(e){return void 0===e}var r,o,e=Array.prototype;function T(e){return"function"==typeof e}function i(e,t){return e<0?function(e,t){return t<=e?e:t}(0,t+e):e}function u(e,t,n,r,o){e&&function(e,t,n,r,o){var u=e.length;n=T(n)?(o=r,r=n,u):i(n,u),d(e,t=i(t,u),n,r,o)}(e,t,n,r,o)}(r=e,function(e,t){e in r&&(e="c$"+e),o?(!n(t.value)&&n(t.writable)&&(t.writable=!0),Object.defineProperty(r,e,g({enumerable:!1,configurable:!0},t))):r[e]=t})("append",function(e){return p(this,e)});var a=Array.isArray;var y="Content-Type",c="ECONNRESET",b="ETIMEDOUT",q="ENETWORK";function l(r,e){return E(e,function(e,t){if(f(e)){var n=r[t];n=f(n)?n:{},r[t]=l(n,e)}else r[t]=e}),r}function R(e,t){var n=new Error(e);return g(n,t),n}function h(e,t){return e+(-1===e.indexOf("?")?"?":"&")+t}var v=/([?&]_=)[^&]*/,m=Date.now();var x=console&&console.error||function(){};function t(n){return n.use=function(e,t){return n.append({fulfilled:e,rejected:t})},n.eject=function(e){return function(e,t){e&&a(e)&&function(e,t){e.splice(t,1)[0]}(e,t)}(e),n},n}var H="Content-Type";function j(e){var t=e.url,n=e.baseUrl,r=e.headers,o=e.method,u=e.qs,i=e.data,a=e.cache,s=e.adapter;switch(n&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)&&(t=function(e){var t=arguments,n=t.length;w(e)?1<n&&(e=""):e=e.replace(/\/+$/,"");var r="";return d(t,1,n,function(e){r+="/",r+=e||""}),r&&(e+=r.replace(/\/+/g,"/")),e}(n,t)),o){case"HEAD":case"DELETE":case"GET":u||(e.qs=u=i,e.data=i=void 0);break;case"POST":var c=r[H]||"";f(i)&&(i=c.indexOf("application/json")?function(e){var n=[];return E(e,function(e,t){n.append(t+"="+e)}),n.join("&")}(i):JSON.stringify(i),e.data=i)}return u&&(f(u)&&(u=function(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");var r=[];return E(e,function(e,t){e||!w(e)&&!isNaN(e)||(e=""),p(r,encodeURIComponent(t)+n+encodeURIComponent(e))}),r.length?r.join(t):""}(u)),t=h(t,u)),!1===a&&-1<["HEAD","DELETE","GET"].indexOf(o)&&(t=function(e){return m++,e.replace(v,"$1"+m)===e&&(e=h(e,"_="+m)),e}(t)),e.url=t,s(e)}function A(e,t,n){return function(t){return u(arguments,1,function(e){e.forEach(function(e){t=f(e)?t.then(e.fulfilled,e.rejected):t.then(e)})}),t}(Promise.resolve(e),n.request,t.request,[j],t.response,n.response)}var C={timeout:0,responseType:"json",validateStatus:function(e){return 200<=e&&e<300||304===e}};function O(e){return"string"==typeof e}var N="Request aborted",S={};function U(e){var t={};return e?f(e)&&(e=(t=e).message||N):e=N,t.code=c,R(e,t)}function D(e){var t=Date.now().toString(36)+Math.random().toString(36).slice(2);return S[t]=e,t}function P(e){return e&&e.code===c}function k(e){e&&delete S[e]}var L={json:"application/json; charset=UTF-8",form:"application/x-www-form-urlencoded; charset=UTF-8","form-data":"multipart/form-data; charset=UTF-8"},F={"Content-Type":L.form},G={common:{Accept:"application/json, text/plain, */*"}};["DELETE","GET","HEAD"].forEach(function(e){G[e]={}}),["POST","PUT","PATCH"].forEach(function(e){G[e]=g({},F)}),C.adapter=function(m){return new Promise(function(u,i){var t,a,e=m.method,n=m.url,r=m.data,o=m.async,s=m.timeout,c=m.responseType,f=m.onDownloadProgress,d=m.onUploadProgress,p=m.abortion,l=new window.XMLHttpRequest,h=function(){l=a=t=null};l.open(e,n,!1!==o),l.timeout=s||0,l.onreadystatechange=function(){if(l&&4===l.readyState){k(a);var e=l.status,t=l.responseURL,n=l.responseText;if(0!==e||t&&0===t.indexOf("file:")){var r=c&&"text"!==c?l.response||n:l,o={data:r,statusText:l.statusText,options:m,request:l,status:e};if(m.validateStatus(e)){if("json"===c&&O(r))try{o.data=JSON.parse(r)}catch(e){x("Parse data error: ",e)}u(o)}else i(function(e,t){return R("Request failed with status code "+(t.code=e),t)}(e,o));h()}}},l.onabort=function(){l&&(i(g(t,{options:m,request:l})),k(a),h())},a=D(function(e){t=e,l&&l.abort()}),T(p)&&p(a),l.onerror=function(){k(a),i(function(e,t){return t.code=q,R(e||"Network Error")}(null,{options:m,request:l})),h()},l.ontimeout=function(){k(a),i(function(e,t){return t.code=b,R("Timeout of "+e+"ms exceeded",t)}(s,{options:m,request:l})),h()};var v=m.headers;if(T(l.setRequestHeader)&&E(v,function(e,t){w(r)&&t===y?delete v[t]:l.setRequestHeader(t,e)}),m.withCredentials&&(l.withCredentials=!0),c)try{l.responseType=c||""}catch(e){x("responseType error: ",e)}T(f)&&l.addEventListener("progress",f),T(d)&&l.upload&&l.upload.addEventListener("progress",d),l.send(r||null)})};var I=function(e){this.interceptors={request:t([]),response:t([])},this.internalHooks={request:t([]),response:t([])},this.defaults=function(t){return u(arguments,1,function(e){l(t,e)}),t}({},C,e)};I.prototype.request=function(e){var t,n=(e=g({},this.defaults,e)).method,r=e.headers,o=e.contentType;return n=e.method=n?n.toUpperCase():"GET",r=e.headers=function(e,t){return g({},G.common,G[t],e)}(r,n),(t=function(e){return e&&L[e]}(o))&&(r[y]=t),A(e,this.internalHooks,this.interceptors)},I.prototype.setHeader=function(e,t,n){return n=n?n.toUpperCase():"common","Content-Type"===e&&(t=L[t]||t),(G[n]||G.common)[e]=t,this};var M=function t(e){var n=new I(e),o=function(e,t){return f(e)?e=(t=e).url:(t=t||{}).url=e,n.request(t)};return g(o,{use:function(e){return e.installed||(e(n,o),e.installed=!0),o},create:function(e){return t(e)},all:function(e){return Promise.all(e.map(function(e){return o(e)}))},isAborted:P,abort:function(e,t){return function(e,t,n){return(0,S[e])(U(t)),delete S[e],n}(e,t,o)},abortAll:function(e){return function(n,e){return E(S,function(e,t){e(U(n)),delete S[t]}),e}(e,o)}}),["get","delete","head","options","post","put","patch"].forEach(function(r){o[r]=function(e,t,n){return o(e,l({method:r,data:t},n))}}),o.del=o.delete,o}();function X(e){var t=e.internalHooks;window&&window.window===window&&t.request.use(function(e){var t=e.auth,n=e.headers;if(t){var r=t.username||"",o=t.password||"";n.Authorization="Basic "+window.btoa(r+":"+o)}return e})}function $(){return!!(w(navigator)||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&(!w(window)&&!w(document))}var z=$()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function u(e){var t=e;return r&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return n=u(window.location.href),function(e){var t=O(e)?u(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},K={set:function(){},get:function(){return null},remove:function(){}};function J(e){var t=e.internalHooks;window&&window.window===window&&t.request.use(function(e){var t=e.url,n=e.headers,r=e.withCredentials,o=e.xsrfCookieName;void 0===o&&(o="XSRF-TOKEN");var u=e.xsrfHeaderName;if(void 0===u&&(u="X-XSRF-TOKEN"),$()){var i=(r||z(t))&&o?K.get(o):void 0;i&&(n[u]=i)}return e})}K.set=function(e,t,n,r,o,u){var i=[];i.push(e+"="+encodeURIComponent(t)),function(e){return"number"==typeof e}(n)&&i.push("expires="+new Date(n).toGMTString()),O(r)&&i.push("path="+r),O(o)&&i.push("domain="+o),!0===u&&i.push("secure"),document.cookie=i.join("; ")},K.get=function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},K.remove=function(e){this.write(e,"",Date.now()-864e5)};var _=/^(.*?):[ \t]*([^\r\n]*)$/gm;function B(e){var t=e.internalHooks;window&&window.XMLHttpRequest&&t.response.use(function(e){var t=e.request;return e.options.getAllResponseHeaders&&t.getAllResponseHeaders&&(e.headers=function(e){for(var t,n={};t=_.exec(e);)n[t[1].toLowerCase()]=t[2];return n}(t.getAllResponseHeaders())),e})}return M.use(X).use(J).use(B),M.plugins={auth:X,xsrf:J,resHeaders:B},M},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).tammy=t();